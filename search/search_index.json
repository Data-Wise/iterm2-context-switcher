{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"iTerm2 Context Switcher","text":"<p>Smart context switching for iTerm2 with auto-profile switching and tab titles.</p> <p>Version: 2.4.0</p>"},{"location":"#what-it-does","title":"What It Does","text":"<p>Automatically switches iTerm2 profiles (colors) and sets tab titles based on your current directory:</p> Context Icon Profile Theme Production \ud83d\udea8 Production Red AI Sessions \ud83e\udd16 AI-Session Purple R Package \ud83d\udce6 R-Dev Blue Python \ud83d\udc0d Python-Dev Green Node.js \ud83d\udce6 Node-Dev Dark Quarto \ud83d\udcca R-Dev Blue MCP Server \ud83d\udd0c AI-Session Purple Emacs \u26a1 Emacs Purple Dev-Tools \ud83d\udd27 Dev-Tools Amber"},{"location":"#features","title":"Features","text":"<ul> <li>\u2705 Auto-switch profiles by directory context</li> <li>\u2705 Tab titles with icons and git branch: <code>\ud83d\udce6 medfit (main)</code></li> <li>\u2705 Git dirty indicator: <code>\ud83d\udce6 medfit (main)*</code> when uncommitted changes</li> <li>\u2705 Production environment warnings (\ud83d\udea8)</li> <li>\u2705 Dynamic profiles auto-installed (no manual setup)</li> <li>\u2705 Claude Code triggers - Dock bounce, error highlighting, notifications</li> <li>\u2705 Status bar variables - Show context in iTerm2 status bar</li> <li>\u2705 Caches state to prevent redundant switches</li> <li>\u2705 Zero configuration after setup</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#option-1-install-script","title":"Option 1: Install Script","text":"<pre><code>cd ~/projects/dev-tools/iterm2-context-switcher\nbash scripts/install-profiles.sh\n</code></pre>"},{"location":"#option-2-manual-setup","title":"Option 2: Manual Setup","text":"<pre><code># Add to ~/.config/zsh/.zshrc (before Oh-My-Zsh loads)\nDISABLE_AUTO_TITLE=\"true\"\n\n# At end of .zshrc\nsource ~/projects/dev-tools/iterm2-context-switcher/zsh/iterm2-integration.zsh\n</code></pre> <p>Important: Set each iTerm2 profile's Title to \"Session Name\" in Preferences.</p> <p>Then reload your shell:</p> <pre><code>source ~/.config/zsh/.zshrc\n</code></pre> <p>See the Installation Guide for detailed setup.</p>"},{"location":"#how-it-works","title":"How It Works","text":"<p>When you <code>cd</code> into a directory, the integration:</p> <ol> <li>Detects context - Checks for project files (DESCRIPTION, pyproject.toml, etc.)</li> <li>Switches profile - Changes iTerm2 colors via escape sequence</li> <li>Sets title - Updates tab title with icon + project name + git branch</li> </ol> <p>Example titles:</p> <ul> <li><code>\ud83d\udce6 medfit (main)</code> - R package on main branch</li> <li><code>\ud83d\udce6 medfit (main)*</code> - R package with uncommitted changes</li> <li><code>\ud83d\udd27 iterm2-context-switcher (dev)</code> - Dev-tools on dev branch</li> <li><code>\ud83d\udc0d myproject (feature/api)</code> - Python project on feature branch</li> </ul> <p>All changes are cached to prevent redundant switches.</p>"},{"location":"#dynamic-profiles","title":"Dynamic Profiles","text":"<p>All 7 color profiles are automatically installed via iTerm2 Dynamic Profiles:</p> <ul> <li>R-Dev - Blue theme for R packages</li> <li>AI-Session - Purple theme for Claude/Gemini</li> <li>Production - Red theme for production warning</li> <li>Dev-Tools - Amber/orange theme for shell tools</li> <li>Emacs - Purple/magenta theme for Emacs configs</li> <li>Python-Dev - Green theme for Python projects</li> <li>Node-Dev - Dark theme for Node.js projects</li> </ul> <p>See Profiles Guide for customization.</p>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Complete installation guide for iTerm2 Context Switcher.</p>"},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>iTerm2 (macOS terminal)</li> <li>Zsh shell</li> <li>Git (for project detection)</li> </ul>"},{"location":"getting-started/installation/#option-1-install-script-recommended","title":"Option 1: Install Script (Recommended)","text":"<p>The fastest way to get started:</p> <pre><code>cd ~/projects/dev-tools/iterm2-context-switcher\nbash scripts/install-profiles.sh\n</code></pre> <p>This automatically installs all 7 color profiles via iTerm2 Dynamic Profiles.</p>"},{"location":"getting-started/installation/#after-running-install-script","title":"After Running Install Script","text":"<ol> <li> <p>Add to your .zshrc (before Oh-My-Zsh loads):</p> <pre><code>DISABLE_AUTO_TITLE=\"true\"\n</code></pre> </li> <li> <p>Add at end of .zshrc:</p> <pre><code>source ~/projects/dev-tools/iterm2-context-switcher/zsh/iterm2-integration.zsh\n</code></pre> </li> <li> <p>Configure iTerm2 profiles (one-time):</p> <p>For each installed profile (R-Dev, AI-Session, etc.):</p> <ul> <li>Open iTerm2 \u2192 Settings \u2192 Profiles</li> <li>Select the profile</li> <li>Go to General tab</li> <li>Set Title to: <code>Session Name</code></li> <li>Check: <code>Applications in terminal may change title</code></li> </ul> </li> <li> <p>Reload shell:</p> <pre><code>source ~/.zshrc\n</code></pre> </li> </ol>"},{"location":"getting-started/installation/#option-2-manual-installation","title":"Option 2: Manual Installation","text":""},{"location":"getting-started/installation/#step-1-install-dynamic-profiles","title":"Step 1: Install Dynamic Profiles","text":"<p>Copy the profiles JSON to iTerm2:</p> <pre><code>cp profiles/context-switcher-profiles.json \\\n   ~/Library/Application\\ Support/iTerm2/DynamicProfiles/\n</code></pre>"},{"location":"getting-started/installation/#step-2-configure-shell","title":"Step 2: Configure Shell","text":"<p>Add to <code>~/.config/zsh/.zshrc</code> (or <code>~/.zshrc</code>):</p> <pre><code># Disable OMZ auto-title (MUST be before Oh My Zsh loads)\nDISABLE_AUTO_TITLE=\"true\"\n\n# At end of file:\nsource ~/projects/dev-tools/iterm2-context-switcher/zsh/iterm2-integration.zsh\n</code></pre> <p>DISABLE_AUTO_TITLE</p> <p>This must be set before Oh My Zsh or Antidote loads, otherwise OMZ will override your tab titles.</p>"},{"location":"getting-started/installation/#step-3-configure-iterm2-title","title":"Step 3: Configure iTerm2 Title","text":"<p>For each profile (R-Dev, AI-Session, Production, etc.):</p> <ol> <li>Open iTerm2 \u2192 Settings \u2192 Profiles \u2192 General</li> <li>Set Title to: <code>Session Name</code></li> <li>Check: <code>Applications in terminal may change title</code></li> </ol> <p>Why Session Name?</p> <p>iTerm2 escape sequences only work when Title is set to \"Session Name\". Without this, titles will show \"zsh\" instead of your project name.</p>"},{"location":"getting-started/installation/#step-4-reload-shell","title":"Step 4: Reload Shell","text":"<pre><code>source ~/.zshrc\n</code></pre>"},{"location":"getting-started/installation/#installed-profiles","title":"Installed Profiles","text":"<p>The install script adds these 7 profiles:</p> Profile Theme Use Case R-Dev Blue R packages, Quarto AI-Session Purple Claude/Gemini sessions Production Red Production warning Dev-Tools Amber Shell scripts, CLI tools Emacs Purple Emacs configurations Python-Dev Green Python projects Node-Dev Dark Node.js projects"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code># Test R package\ncd ~/projects/r-packages/active/medfit\n# Expected: \ud83d\udce6 medfit (main) with blue theme\n\n# Test default\ncd ~\n# Expected: Default profile, no icon\n\n# Check hook is registered\ntype chpwd_iterm_profile\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":"<p>Title shows \"zsh\" instead of project name:</p> <ul> <li>Set each profile's Title to \"Session Name\" in iTerm2 Preferences</li> </ul> <p>Profile colors don't change:</p> <ul> <li>Verify profile names match exactly (case-sensitive)</li> <li>Check <code>echo $TERM_PROGRAM</code> shows <code>iTerm.app</code></li> </ul> <p>Git branch not showing:</p> <ul> <li>Ensure you're in a git repository</li> <li>Run <code>git branch --show-current</code> to verify</li> </ul> <p>See Troubleshooting Guide for more help.</p>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Get up and running in 2 minutes.</p>"},{"location":"getting-started/quickstart/#fastest-setup-recommended","title":"Fastest Setup (Recommended)","text":"<pre><code># 1. Run install script\ncd ~/projects/dev-tools/iterm2-context-switcher\nbash scripts/install-profiles.sh\n\n# 2. Add to your .zshrc\necho 'DISABLE_AUTO_TITLE=\"true\"' &gt;&gt; ~/.zshrc\necho 'source ~/projects/dev-tools/iterm2-context-switcher/zsh/iterm2-integration.zsh' &gt;&gt; ~/.zshrc\n\n# 3. Reload\nsource ~/.zshrc\n\n# 4. Test\ncd ~/projects/r-packages/active/medfit\n# Tab should show: \ud83d\udce6 medfit (main)\n</code></pre>"},{"location":"getting-started/quickstart/#what-youll-see","title":"What You'll See","text":"<p>Titles now include git branch and dirty indicator:</p> When you <code>cd</code> to... Title shows Profile R package (clean) <code>\ud83d\udce6 medfit (main)</code> R-Dev (blue) R package (dirty) <code>\ud83d\udce6 medfit (main)*</code> R-Dev (blue) Python project <code>\ud83d\udc0d myapp (dev)</code> Python-Dev (green) Node project <code>\ud83d\udce6 webapp (feature/x)</code> Node-Dev (dark) Quarto project <code>\ud83d\udcca report (main)</code> R-Dev (blue) Emacs project <code>\u26a1 dotemacs (master)</code> Emacs (purple) Dev tools <code>\ud83d\udd27 cli-tool (dev)*</code> Dev-Tools (amber) Production folder <code>\ud83d\udea8 server (main)</code> Production (red) AI session <code>\ud83e\udd16 claude (main)</code> AI-Session (purple)"},{"location":"getting-started/quickstart/#git-info-format","title":"Git Info Format","text":"<ul> <li><code>(branch)</code> - Current branch name</li> <li><code>(branch)*</code> - Has uncommitted changes</li> <li><code>(feature/lo\u2026ng-name)</code> - Long branches truncated</li> </ul>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Full Installation - Detailed setup guide</li> <li>Context Detection - How detection works</li> <li>Profiles - Customize colors</li> </ul>"},{"location":"guide/context-detection/","title":"Context Detection","text":"<p>How the switcher detects your project type.</p>"},{"location":"guide/context-detection/#detection-priority","title":"Detection Priority","text":"<p>Contexts are checked in this order (first match wins):</p> <pre><code>1. \ud83d\udea8 Production   (path)        \u2500\u2510\n2. \ud83e\udd16 AI-Session   (path)         \u2502 Safety first\n3. \ud83d\udce6 R Package    (DESCRIPTION) \u2500\u2510\n4. \ud83d\udc0d Python       (pyproject.toml)\u2502 Language-specific\n5. \ud83d\udce6 Node         (package.json)  \u2500\u2518\n6. \ud83d\udcca Quarto       (_quarto.yml) \u2500\u2510\n7. \ud83d\udd0c MCP Server   (mcp-server/)  \u2502\n8. \u26a1 Emacs        (Cask, etc.)   \u2502 Tool types\n9. \ud83d\udd27 Dev-Tools    (scripts/)    \u2500\u2518\n10.   Default      (fallback)\n</code></pre>"},{"location":"guide/context-detection/#detection-methods","title":"Detection Methods","text":""},{"location":"guide/context-detection/#path-based-detection","title":"Path-based Detection","text":"Context Path Pattern Profile Production <code>*/production/*</code> or <code>*/prod/*</code> Production AI Sessions <code>*/claude-sessions/*</code> or <code>*/gemini-sessions/*</code> AI-Session"},{"location":"guide/context-detection/#file-based-detection","title":"File-based Detection","text":"Context File/Directory Profile R Package <code>DESCRIPTION</code> file with <code>Package:</code> field R-Dev Python <code>pyproject.toml</code> file Python-Dev Node.js <code>package.json</code> file Node-Dev Quarto <code>_quarto.yml</code> file R-Dev MCP Server <code>mcp-server/</code> directory or <code>*mcp*</code> with <code>package.json</code> AI-Session Emacs <code>Cask</code>, <code>.dir-locals.el</code>, <code>init.el</code>, or <code>early-init.el</code> Emacs Dev-Tools Git repo with <code>commands/</code> or <code>scripts/</code> directory Dev-Tools"},{"location":"guide/context-detection/#profile-icon-summary","title":"Profile + Icon Summary","text":"Context Profile Icon Theme Production Production \ud83d\udea8 Red AI Sessions AI-Session \ud83e\udd16 Purple R Package R-Dev \ud83d\udce6 Blue Python Python-Dev \ud83d\udc0d Green Node.js Node-Dev \ud83d\udce6 Dark Quarto R-Dev \ud83d\udcca Blue MCP Server AI-Session \ud83d\udd0c Purple Emacs Emacs \u26a1 Purple Dev-Tools Dev-Tools \ud83d\udd27 Amber Default Default (none) Default"},{"location":"guide/context-detection/#conflict-resolution","title":"Conflict Resolution","text":"<p>When multiple markers exist, the first match wins:</p> Scenario Winner Why R pkg with Quarto vignettes \ud83d\udce6 R R detected first Python with Makefile \ud83d\udc0d Python Python detected first Quarto in production folder \ud83d\udea8 Production Safety priority MCP server with Node \ud83d\udd0c MCP MCP detected before Node"},{"location":"guide/context-detection/#project-name-extraction","title":"Project Name Extraction","text":"<p>For some contexts, the project name is extracted from files:</p> Context Source R Package <code>Package:</code> field in DESCRIPTION Node.js <code>\"name\"</code> field in package.json Quarto <code>title:</code> field in _quarto.yml Others Directory name"},{"location":"guide/context-detection/#detection-requirements","title":"Detection Requirements","text":""},{"location":"guide/context-detection/#dev-tools-detection","title":"Dev-Tools Detection","text":"<p>Dev-tools detection requires:</p> <ol> <li>Git repository (<code>.git</code> directory exists)</li> <li>AND one of:</li> <li><code>commands/</code> directory</li> <li><code>scripts/</code> directory</li> <li><code>bin/</code> directory with <code>Makefile</code></li> </ol> <p>This prevents false positives (e.g., <code>~/scripts</code> folder).</p>"},{"location":"guide/context-detection/#mcp-server-detection","title":"MCP Server Detection","text":"<p>MCP servers are detected by:</p> <ol> <li><code>mcp-server/</code> directory exists, OR</li> <li>Path contains <code>mcp</code> AND has <code>package.json</code></li> </ol>"},{"location":"guide/profiles/","title":"iTerm2 Profiles","text":"<p>Configure iTerm2 profiles for visual context switching.</p>"},{"location":"guide/profiles/#auto-installed-profiles","title":"Auto-Installed Profiles","text":"<p>Dynamic profiles are automatically installed and ready to use:</p> Profile Icon Theme Use Case Dev-Tools \ud83d\udd27 Amber/Orange Shell scripts, CLI tools Emacs \u26a1 Purple/Magenta Emacs configurations Python-Dev \ud83d\udc0d Green Python projects Node-Dev \ud83d\udce6 Dark Node.js projects R-Dev \ud83d\udce6 Blue R packages, Quarto AI-Session \ud83e\udd16 Purple Claude/Gemini sessions Production \ud83d\udea8 Red Production warning"},{"location":"guide/profiles/#profile-mappings","title":"Profile Mappings","text":"Context Type Profile Used Icon R packages R-Dev \ud83d\udce6 Python projects Python-Dev \ud83d\udc0d Node.js projects Node-Dev \ud83d\udce6 Quarto projects R-Dev \ud83d\udcca MCP servers AI-Session \ud83d\udd0c Emacs configs Emacs \u26a1 Dev-tools Dev-Tools \ud83d\udd27 AI sessions AI-Session \ud83e\udd16 Production Production \ud83d\udea8 Default Default (none)"},{"location":"guide/profiles/#important-title-configuration","title":"Important: Title Configuration","text":"<p>For profile switching to work, each profile must have:</p> <ol> <li>General \u2192 Title: Set to \"Session Name\"</li> <li>Check: \"Applications in terminal may change title\"</li> </ol> <p>Without this, escape sequences won't update the title.</p>"},{"location":"guide/profiles/#dynamic-profiles-location","title":"Dynamic Profiles Location","text":"<p>Profiles are stored in:</p> <pre><code>~/Library/Application Support/iTerm2/DynamicProfiles/context-switcher-profiles.json\n</code></pre>"},{"location":"guide/profiles/#creating-custom-profiles","title":"Creating Custom Profiles","text":""},{"location":"guide/profiles/#custom-dynamic-profiles","title":"Custom Dynamic Profiles","text":"<p>Add to the existing JSON file:</p> <pre><code>{\n  \"Name\": \"My-Profile\",\n  \"Guid\": \"unique-id-here\",\n  \"Dynamic Profile Parent Name\": \"Default\",\n  \"Background Color\": {\n    \"Red Component\": 0.1,\n    \"Green Component\": 0.1,\n    \"Blue Component\": 0.1,\n    \"Alpha Component\": 1\n  }\n}\n</code></pre>"},{"location":"guide/profiles/#profile-color-reference","title":"Profile Color Reference","text":"Profile Background Foreground R-Dev Dark blue (#141f2e) Light blue (#cce6ff) AI-Session Dark purple (#1f1429) Light purple (#e6d9ff) Production Dark red (#330d0d) Light red (#ffd9d9) Dev-Tools Dark brown (#1f1a0f) Amber (#ffc259) Emacs Dark purple (#1a1424) Light purple (#d9ccf2) Python-Dev Green (#137746) Yellow (#fff0a5) Node-Dev Dark (#121212) Gray (#bfbfbf)"},{"location":"guide/profiles/#troubleshooting","title":"Troubleshooting","text":"<p>Profile doesn't switch:</p> <ul> <li>Ensure <code>$TERM_PROGRAM</code> equals <code>iTerm.app</code></li> <li>Check profile name matches exactly (case-sensitive)</li> <li>Verify profile exists in iTerm2 Preferences</li> </ul> <p>Title doesn't update:</p> <ul> <li>Set Title to \"Session Name\" in profile settings</li> <li>Enable \"Applications in terminal may change title\"</li> </ul>"},{"location":"guide/status-bar/","title":"Status Bar Integration","text":"<p>Display context information in iTerm2's status bar.</p>"},{"location":"guide/status-bar/#available-variables-v240","title":"Available Variables (v2.4.0)","text":"<p>The context switcher sets these user variables on every directory change:</p> Variable Content Example <code>\\(user.ctxIcon)</code> Context icon <code>\ud83d\udce6</code>, <code>\ud83d\udc0d</code>, <code>\ud83d\udd27</code> <code>\\(user.ctxName)</code> Project name <code>medfit</code>, <code>myapp</code> <code>\\(user.ctxBranch)</code> Git branch <code>main</code>, <code>dev</code> <code>\\(user.ctxProfile)</code> Active profile <code>R-Dev</code>, <code>Python-Dev</code>"},{"location":"guide/status-bar/#step-by-step-setup","title":"Step-by-Step Setup","text":""},{"location":"guide/status-bar/#step-1-enable-status-bar","title":"Step 1: Enable Status Bar","text":"<ol> <li>Open iTerm2 \u2192 Settings (\u2318,)</li> <li>Click Profiles tab</li> <li>Select your profile (e.g., Default) in the left sidebar</li> <li>Click Session sub-tab (in the row: General, Colors, Text, Session, etc.)</li> <li>Check the box: Status bar enabled</li> <li>Click Configure Status Bar button</li> </ol>"},{"location":"guide/status-bar/#step-2-add-interpolated-string-component","title":"Step 2: Add Interpolated String Component","text":"<p>The Configure Status Bar panel has two sections:</p> <ul> <li>Top: Available components (drag from here)</li> <li> <p>Bottom: Active components (your status bar)</p> </li> <li> <p>Scroll down in the available components list</p> </li> <li>Find Interpolated String (near the bottom)</li> <li>Drag it to the Active Components area at the bottom</li> <li>Position it where you want (left side recommended)</li> </ul>"},{"location":"guide/status-bar/#step-3-configure-the-component","title":"Step 3: Configure the Component","text":"<ol> <li>Click on the Interpolated String component you just added</li> <li>Click Configure Component button (bottom left)</li> <li>In the String Value field, enter:</li> </ol> <pre><code>\\(user.ctxIcon) \\(user.ctxName) (\\(user.ctxBranch))\n</code></pre> <ol> <li>Optionally set:</li> <li>Background Color: Pick a color or leave default</li> <li>Text Color: Pick a color or leave default</li> <li> <p>Size: Fixed or Auto</p> </li> <li> <p>Click OK to close the component config</p> </li> <li>Click OK to close the status bar config</li> </ol>"},{"location":"guide/status-bar/#step-4-reload-your-shell","title":"Step 4: Reload Your Shell","text":"<pre><code>source ~/.zshrc\n</code></pre> <p>Then <code>cd</code> to a project directory to see it update!</p>"},{"location":"guide/status-bar/#understanding-interpolated-strings","title":"Understanding Interpolated Strings","text":"<p>iTerm2 interpolated strings use <code>\\(expression)</code> syntax:</p> <pre><code>\\(variableName)           \u2192 Evaluates to variable value\n\\(user.customVar)         \u2192 User-defined variables start with \"user.\"\n</code></pre> <p>Our variables:</p> <ul> <li><code>\\(user.ctxIcon)</code> \u2192 <code>\ud83d\udce6</code></li> <li><code>\\(user.ctxName)</code> \u2192 <code>medfit</code></li> <li><code>\\(user.ctxBranch)</code> \u2192 <code>main</code></li> <li><code>\\(user.ctxProfile)</code> \u2192 <code>R-Dev</code></li> </ul> <p>Combining them:</p> <pre><code>\\(user.ctxIcon) \\(user.ctxName)\n</code></pre> <p>Result: <code>\ud83d\udce6 medfit</code></p>"},{"location":"guide/status-bar/#built-in-variables-you-can-also-use","title":"Built-in Variables You Can Also Use","text":"<p>iTerm2 provides many built-in variables:</p> Variable Description <code>\\(session.path)</code> Current directory path <code>\\(session.hostname)</code> Current hostname <code>\\(session.username)</code> Current username <code>\\(session.jobName)</code> Running command name <code>\\(session.columns)</code> Terminal width <code>\\(session.rows)</code> Terminal height <p>Example combining built-in and custom:</p> <pre><code>\\(user.ctxIcon) \\(user.ctxName) @ \\(session.hostname)\n</code></pre> <p>Result: <code>\ud83d\udce6 medfit @ macbook</code></p>"},{"location":"guide/status-bar/#example-configurations","title":"Example Configurations","text":""},{"location":"guide/status-bar/#minimal-icon-name","title":"Minimal: Icon + Name","text":"<pre><code>\\(user.ctxIcon) \\(user.ctxName)\n</code></pre> <p>Shows: <code>\ud83d\udd27 iterm2-context-switcher</code></p>"},{"location":"guide/status-bar/#full-icon-name-branch","title":"Full: Icon + Name + Branch","text":"<pre><code>\\(user.ctxIcon) \\(user.ctxName) (\\(user.ctxBranch))\n</code></pre> <p>Shows: <code>\ud83d\udce6 medfit (main)</code></p>"},{"location":"guide/status-bar/#profile-aware","title":"Profile-Aware","text":"<pre><code>[\\(user.ctxProfile)] \\(user.ctxIcon) \\(user.ctxName)\n</code></pre> <p>Shows: <code>[R-Dev] \ud83d\udce6 medfit</code></p>"},{"location":"guide/status-bar/#branch-only","title":"Branch Only","text":"<pre><code>\\(user.ctxBranch)\n</code></pre> <p>Shows: <code>main</code> or <code>feature/new-api</code></p>"},{"location":"guide/status-bar/#recommended-status-bar-layout","title":"Recommended Status Bar Layout","text":"<p>A balanced status bar setup:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udce6 medfit (main)  \u2502  ~/projects/...  \u2502  CPU  \u2502  12:30 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2191                    \u2191               \u2191        \u2191\n  Context            Current Dir       System   Clock\n</code></pre> <p>Components (left to right):</p> <ol> <li>Interpolated String - <code>\\(user.ctxIcon) \\(user.ctxName) (\\(user.ctxBranch))</code></li> <li>Spring (spacer)</li> <li>Current Directory (built-in)</li> <li>CPU Utilization (built-in, optional)</li> <li>Clock (built-in)</li> </ol>"},{"location":"guide/status-bar/#status-bar-position","title":"Status Bar Position","text":"<p>By default, the status bar appears at the top. To move it to the bottom:</p> <ol> <li>Open iTerm2 \u2192 Settings (\u2318,)</li> <li>Click Appearance tab</li> <li>Under General, find Status bar location</li> <li>Select Bottom</li> </ol> <p>Bottom Recommended</p> <p>Bottom placement keeps the status bar near your command line, making it easier to glance at context while typing.</p>"},{"location":"guide/status-bar/#available-components","title":"Available Components","text":""},{"location":"guide/status-bar/#recommended-components","title":"Recommended Components","text":"Component Description Use Case Interpolated String Custom variables Your context info git state Branch, dirty, ahead/behind Built-in git info Current Directory Full path Know where you are Clock Time and date Always useful Job Name Running process See what's executing"},{"location":"guide/status-bar/#system-monitors","title":"System Monitors","text":"Component Description Use Case CPU Utilization CPU graph over time Monitor heavy jobs Memory Utilization RAM graph over time Watch data analysis Battery Level Battery with charging Laptop users Network Throughput Upload/download Monitor transfers"},{"location":"guide/status-bar/#spacers","title":"Spacers","text":"Component Description Spring Flexible spacer (pushes items apart) Fixed-size Spacer Fixed width gap Empty Space Minimal gap"},{"location":"guide/status-bar/#ui-tools","title":"UI Tools","text":"Component Description Composer Edit commands before sending Search Tool Search terminal history Filter Filter terminal output Snippets Quick text insertion"},{"location":"guide/status-bar/#suggested-layouts","title":"Suggested Layouts","text":""},{"location":"guide/status-bar/#minimal-recommended","title":"Minimal (Recommended)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udce6 medfit (main)  \u2502  ~/projects/r-packages/active/medfit  \u2502  14:30 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components:</p> <ol> <li>Interpolated String: <code>\\(user.ctxIcon) \\(user.ctxName) (\\(user.ctxBranch))</code></li> <li>Spring</li> <li>Current Directory</li> <li>Clock</li> </ol>"},{"location":"guide/status-bar/#with-system-monitors","title":"With System Monitors","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udce6 medfit  \u2502  CPU \u2583\u2585\u2582  \u2502  RAM \u2586\u2584\u2585  \u2502  ~/proj...  \u2502  14:30   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components:</p> <ol> <li>Interpolated String: <code>\\(user.ctxIcon) \\(user.ctxName)</code></li> <li>CPU Utilization</li> <li>Memory Utilization</li> <li>Spring</li> <li>Current Directory</li> <li>Clock</li> </ol>"},{"location":"guide/status-bar/#developer-focus","title":"Developer Focus","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udce6 medfit  \u2502  main*  \u2502  R  \u2502  ~/projects/...  \u2502  14:30     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Components:</p> <ol> <li>Interpolated String: <code>\\(user.ctxIcon) \\(user.ctxName)</code></li> <li>git state (built-in)</li> <li>Job Name</li> <li>Spring</li> <li>Current Directory</li> <li>Clock</li> </ol>"},{"location":"guide/status-bar/#status-bar-styling","title":"Status Bar Styling","text":""},{"location":"guide/status-bar/#component-settings","title":"Component Settings","text":"<p>For each component, you can set:</p> <ul> <li>Background Color - Override default</li> <li>Text Color - Override default</li> <li>Priority - Higher priority keeps component visible when space is tight (default: 5)</li> <li>Minimum Width - Prevent component from shrinking too small</li> </ul>"},{"location":"guide/status-bar/#recommended-settings-for-context-component","title":"Recommended Settings for Context Component","text":"<ul> <li>Priority: 10 (high - keep visible)</li> <li>Minimum Width: 100</li> <li>Background Color: Match your theme or leave default</li> </ul>"},{"location":"guide/status-bar/#per-profile-status-bars","title":"Per-Profile Status Bars","text":"<p>Each iTerm2 profile can have its own status bar configuration.</p> <p>Tip: Configure the status bar on your Default profile, then child profiles (R-Dev, Python-Dev, etc.) will inherit it automatically.</p>"},{"location":"guide/status-bar/#built-in-git-component","title":"Built-in Git Component","text":"<p>iTerm2 also has a built-in git state component that shows:</p> <ul> <li>Branch name</li> <li>Dirty/clean status</li> <li>Ahead/behind remote</li> </ul> <p>You can use this alongside or instead of <code>\\(user.ctxBranch)</code>.</p> <p>To add it:</p> <ol> <li>Configure Status Bar</li> <li>Drag git state to your bar</li> <li>It auto-updates based on the current directory</li> </ol>"},{"location":"guide/status-bar/#troubleshooting","title":"Troubleshooting","text":"<p>Variables show empty or literal text:</p> <ul> <li>Reload your shell: <code>source ~/.zshrc</code></li> <li>Verify integration is loaded: <code>type _iterm_detect_context</code></li> <li>Run <code>cd .</code> to trigger an update</li> </ul> <p>Status bar not visible:</p> <ul> <li>Enable in Settings \u2192 Profiles \u2192 Session \u2192 Status bar enabled</li> <li>Check the profile you're using has status bar enabled</li> </ul> <p>Variables not updating:</p> <ul> <li>Variables update on directory change (<code>cd</code>)</li> <li>Run <code>_iterm_detect_context</code> manually to force update</li> </ul> <p>Wrong variable values:</p> <ul> <li>Check you're in the expected directory</li> <li>Verify git repo exists for branch info</li> </ul>"},{"location":"guide/status-bar/#technical-details","title":"Technical Details","text":"<p>User variables are set via iTerm2's OSC 1337 escape sequence:</p> <pre><code>printf '\\033]1337;SetUserVar=%s=%s\\007' \"name\" \"$(echo -n 'value' | base64)\"\n</code></pre> <p>The context switcher calls this automatically on every <code>chpwd</code> hook (directory change).</p> <p>Variables persist in the session until changed or the session ends.</p>"},{"location":"guide/triggers/","title":"iTerm2 Triggers","text":"<p>Automatic notifications for Claude Code sessions.</p>"},{"location":"guide/triggers/#built-in-triggers-v230","title":"Built-in Triggers (v2.3.0)","text":"<p>The AI-Session profile now includes triggers for Claude Code:</p> Pattern Action Effect <code>Allow .+?</code> Bounce Dock Icon Dock bounces when tool approval needed <code>Error:\\|error:\\|failed</code> Highlight Text Errors shown in red <code>Session cost:\\|Total cost:</code> Post Notification macOS notification on <code>/cost</code> <code>\u2713\\|completed</code> Highlight Text Success markers shown in green <p>These triggers activate automatically when using the AI-Session profile.</p>"},{"location":"guide/triggers/#how-triggers-work","title":"How Triggers Work","text":"<p>iTerm2 triggers watch terminal output and perform actions when regex patterns match.</p> <pre><code>Terminal Output \u2192 Regex Match \u2192 Action Triggered\n</code></pre> <p>Useful for:</p> <ul> <li>Getting notified when Claude needs input</li> <li>Highlighting errors and successes</li> <li>Bouncing dock when attention needed</li> </ul>"},{"location":"guide/triggers/#customizing-triggers","title":"Customizing Triggers","text":""},{"location":"guide/triggers/#viewedit-triggers","title":"View/Edit Triggers","text":"<ol> <li>Open iTerm2 \u2192 Settings \u2192 Profiles</li> <li>Select AI-Session</li> <li>Go to Advanced tab</li> <li>Click Edit next to Triggers</li> </ol>"},{"location":"guide/triggers/#add-new-trigger","title":"Add New Trigger","text":"Field Description Regular Expression Regex pattern to match Action What to do when matched Parameters Action-specific options Instant Match immediately (don't wait for newline)"},{"location":"guide/triggers/#additional-trigger-ideas","title":"Additional Trigger Ideas","text":""},{"location":"guide/triggers/#notification-when-claude-idle","title":"Notification When Claude Idle","text":"<pre><code>Regex: ^&gt; $\nAction: Post Notification\nParameters: Claude waiting for input\nInstant: \u2705\n</code></pre>"},{"location":"guide/triggers/#sound-on-long-tasks","title":"Sound on Long Tasks","text":"<pre><code>Regex: (completed|finished|done)\nAction: Ring Bell\nInstant: \u274c\n</code></pre>"},{"location":"guide/triggers/#highlight-warnings","title":"Highlight Warnings","text":"<pre><code>Regex: [Ww]arning:|WARN\nAction: Highlight Text\nParameters: {#ffaa00,}\n</code></pre>"},{"location":"guide/triggers/#available-actions","title":"Available Actions","text":"Action Description Post Notification macOS notification center Bounce Dock Icon Bounces until window focused Ring Bell Plays system bell sound Highlight Line Colors entire line Highlight Text Colors matched text only Set Title Changes tab title Show Alert Popup alert dialog Run Command Execute shell command Send Text Send text to terminal"},{"location":"guide/triggers/#color-format","title":"Color Format","text":"<p>For Highlight triggers, use <code>{#rrggbb,#rrggbb}</code> format:</p> <ul> <li>First color: foreground</li> <li>Second color: background</li> <li>Empty string for unchanged: <code>{#ff0000,}</code> (red text, no bg change)</li> </ul> <p>Examples:</p> <ul> <li><code>{#ff4444,#330000}</code> - Red text on dark red background</li> <li><code>{#44ff44,}</code> - Green text, default background</li> <li><code>{,#ffffcc}</code> - Default text, yellow background</li> </ul>"},{"location":"guide/triggers/#profile-inheritance","title":"Profile Inheritance","text":"<p>Triggers on the Default profile are inherited by child profiles.</p> <p>Since all our profiles use <code>Dynamic Profile Parent Name: Default</code>, you can:</p> <ol> <li>Add triggers to Default for global behavior</li> <li>Add triggers to AI-Session for Claude-specific behavior</li> </ol> <p>The AI-Session triggers are specific to Claude/AI sessions and won't affect other profiles.</p>"},{"location":"guide/triggers/#troubleshooting","title":"Troubleshooting","text":"<p>Triggers not firing:</p> <ul> <li>Check regex syntax (use ICU regex)</li> <li>Try enabling \"Instant\" for prompts without newlines</li> <li>Verify profile is active (check tab color)</li> </ul> <p>Too many notifications:</p> <ul> <li>Make regex more specific</li> <li>Remove broad patterns like <code>completed</code></li> </ul> <p>Dock won't stop bouncing:</p> <ul> <li>Click on iTerm2 window to focus it</li> <li>Or disable the trigger temporarily</li> </ul>"},{"location":"reference/configuration/","title":"Configuration Reference","text":""},{"location":"reference/configuration/#shell-configuration","title":"Shell Configuration","text":""},{"location":"reference/configuration/#required-in-zshrc","title":"Required in .zshrc","text":"<pre><code># Must be before Oh My Zsh / Antidote loads\nDISABLE_AUTO_TITLE=\"true\"\n\n# At end of .zshrc\nsource ~/path/to/iterm2-context-switcher/zsh/iterm2-integration.zsh\n</code></pre>"},{"location":"reference/configuration/#environment-variables","title":"Environment Variables","text":"Variable Purpose Default <code>TERM_PROGRAM</code> Must be \"iTerm.app\" Set by iTerm2 <code>DISABLE_AUTO_TITLE</code> Prevent OMZ title override Not set"},{"location":"reference/configuration/#integration-variables","title":"Integration Variables","text":"<p>These are set by the integration (read-only):</p> Variable Purpose <code>_ITERM_CURRENT_PROFILE</code> Currently active profile <code>_ITERM_CURRENT_TITLE</code> Current tab title <code>_ITERM_HOOK_REGISTERED</code> Prevents duplicate hooks"},{"location":"reference/configuration/#iterm2-configuration","title":"iTerm2 Configuration","text":""},{"location":"reference/configuration/#title-settings","title":"Title Settings","text":"<p>Path: Settings \u2192 Profiles \u2192 General \u2192 Title</p> Setting Recommended Title Session Name Alternative Session Name + Job"},{"location":"reference/configuration/#for-triggers","title":"For Triggers","text":"<p>Path: Settings \u2192 Profiles \u2192 Default \u2192 Advanced \u2192 Triggers</p> <p>See Triggers Guide for setup.</p>"},{"location":"reference/configuration/#file-locations","title":"File Locations","text":"File Location Integration script <code>zsh/iterm2-integration.zsh</code> Dynamic Profiles <code>profiles/context-switcher-profiles.json</code> iTerm2 Dynamic Profiles <code>~/Library/Application Support/iTerm2/DynamicProfiles/</code> iTerm2 Preferences <code>~/Library/Preferences/com.googlecode.iterm2.plist</code>"},{"location":"reference/configuration/#escape-sequences-used","title":"Escape Sequences Used","text":"Sequence Purpose <code>\\033]1337;SetProfile=NAME\\007</code> Switch profile <code>\\033]2;TITLE\\007</code> Set window title"},{"location":"reference/troubleshooting/","title":"Troubleshooting","text":""},{"location":"reference/troubleshooting/#common-issues","title":"Common Issues","text":""},{"location":"reference/troubleshooting/#profiles-not-switching","title":"Profiles Not Switching","text":"<p>Symptom: Colors don't change when you <code>cd</code> to a project.</p> <p>Check:</p> <ol> <li> <p>Verify you're in iTerm2:    <pre><code>echo $TERM_PROGRAM\n# Should show: iTerm.app\n</code></pre></p> </li> <li> <p>Verify profiles exist (exact names, case-sensitive):</p> </li> <li>R-Dev</li> <li>Python-Dev</li> <li>Node-Dev</li> <li>AI-Session</li> <li> <p>Production</p> </li> <li> <p>Verify integration is loaded:    <pre><code>typeset -f _iterm_detect_context\n# Should show function definition\n</code></pre></p> </li> <li> <p>If not loaded, source it:    <pre><code>source ~/.config/zsh/.zshrc\n</code></pre></p> </li> </ol>"},{"location":"reference/troubleshooting/#title-not-showing","title":"Title Not Showing","text":"<p>Symptom: Tab shows \"zsh\" or directory instead of icon + name.</p> <p>Check:</p> <ol> <li>iTerm2 title setting:</li> <li>Settings \u2192 Profiles \u2192 General \u2192 Title</li> <li> <p>Set to: Session Name</p> </li> <li> <p>OMZ auto-title disabled:    <pre><code>echo $DISABLE_AUTO_TITLE\n# Should show: true\n</code></pre></p> </li> <li> <p>If not set, add before antidote/OMZ in .zshrc:    <pre><code>DISABLE_AUTO_TITLE=\"true\"\n</code></pre></p> </li> </ol>"},{"location":"reference/troubleshooting/#title-shows-briefly-then-disappears","title":"Title Shows Briefly Then Disappears","text":"<p>Symptom: Title flashes correct value then changes.</p> <p>Cause: Something else is overwriting the title (usually OMZ).</p> <p>Fix: Ensure <code>DISABLE_AUTO_TITLE=\"true\"</code> is set before plugins load.</p>"},{"location":"reference/troubleshooting/#loops-terminal-hangs","title":"Loops / Terminal Hangs","text":"<p>Symptom: Terminal freezes after <code>cd</code>.</p> <p>Fix:</p> <ol> <li> <p>Disable integration temporarily:    <pre><code># Comment out in .zshrc\n# source ~/path/to/iterm2-integration.zsh\n</code></pre></p> </li> <li> <p>Open new terminal</p> </li> <li> <p>Check for conflicting hooks:    <pre><code>echo $chpwd_functions\n</code></pre></p> </li> </ol>"},{"location":"reference/troubleshooting/#wrong-profile-detected","title":"Wrong Profile Detected","text":"<p>Symptom: Shows R-Dev but it's a Python project.</p> <p>Cause: Detection priority - R is checked before Python.</p> <p>Check: Does the directory have a <code>DESCRIPTION</code> file?</p> <pre><code>ls DESCRIPTION\n</code></pre> <p>If yes, R detection wins. This is by design for R packages with Python scripts.</p>"},{"location":"reference/troubleshooting/#diagnostic-script","title":"Diagnostic Script","text":"<p>Run the included diagnostic:</p> <pre><code>~/path/to/iterm2-context-switcher/scripts/diagnose.sh\n</code></pre>"},{"location":"reference/troubleshooting/#reset-everything","title":"Reset Everything","text":"<p>If all else fails:</p> <pre><code># 1. Comment out integration in .zshrc\n# 2. Restart terminal\n# 3. Clear caches\nunset _ITERM_CURRENT_PROFILE\nunset _ITERM_CURRENT_TITLE\nunset _ITERM_HOOK_REGISTERED\n\n# 4. Re-source\nsource ~/.config/zsh/.zshrc\n</code></pre>"}]}