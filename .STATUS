project: aiterm (formerly iterm2-context-switcher)
status: active-development
priority: P1
progress: 95
version: 0.1.0-dev
updated: 2025-12-16
Next: Merge PR and tag release

# What it is
Terminal optimizer CLI for AI-assisted development.
Optimizes iTerm2 (+ other terminals) for Claude Code and Gemini CLI.
Manages profiles, hooks, commands, context detection, and auto-approvals.

# Project Evolution
v2.5.0 (Dec 15): iterm2-context-switcher (zsh-based, iTerm2 only)
v3.0.0 (Dec 15): aiterm (Python CLI, multi-tool, expandable)

# Current state (v0.1.0-dev)
- [x] Planning complete (IDEAS.md, ROADMAP.md)
- [x] @smart Prompt Optimizer (Tier 1 MVP) âœ… IMPLEMENTED!
- [x] Python project structure âœ…
- [x] Core CLI commands (init, doctor) âœ…
- [x] Terminal integration (migrate from zsh) âœ…
- [x] Claude Code settings management âœ…
- [x] Testing & documentation âœ… (51 tests, 83% coverage)

## âœ… Just Completed (2025-12-16 - Final Polish)

### Phase 8: Final Polish & Release Prep
- âœ… Ran final test suite (51 tests, all passing)
- âœ… Branch ready for PR: `claude/recap-dev-main-branches-3eCZB`
- ðŸŸ¡ Awaiting PR merge to main
- ðŸŸ¡ Tag v0.1.0-dev release after merge

---

### Phase 7: Testing & Documentation Polish
- âœ… Added 3 more CLI tests (51 total)
- âœ… Test coverage: 83% (443 statements, 74 missing)
- âœ… Updated README with all implemented commands
- âœ… Documented CLI usage and presets

---

### Phase 6: Claude Code Settings Management
- âœ… Created settings module (load, save, backup)
- âœ… Implemented `aiterm claude settings` - show settings
- âœ… Implemented `aiterm claude backup` - backup settings
- âœ… Implemented `aiterm claude approvals list` - show permissions
- âœ… Implemented `aiterm claude approvals presets` - list 8 presets
- âœ… Implemented `aiterm claude approvals add <preset>` - add preset
- âœ… Added 14 new tests (48 total, all passing)

**Presets Available:**
- safe-reads, git-ops, github-cli, python-dev, node-dev, r-dev, web-tools, minimal

**Files Created:**
- `src/aiterm/claude/settings.py` (settings management)
- `tests/test_claude_settings.py` (14 tests)

---

### Phase 5: Terminal Integration
- âœ… Ported zsh/iterm2-integration.zsh to Python
- âœ… Implemented context detection (8 types: production, ai-session, rpkg, python, node, quarto, emacs, dev-tools)
- âœ… Added iTerm2 module (profile switching, title, user variables)
- âœ… New CLI commands: `aiterm context detect`, `context show`, `context apply`
- âœ… Added 23 new tests (32 total, all passing)

**Files Created:**
- `src/aiterm/context/detector.py` (context detection logic)
- `src/aiterm/terminal/iterm2.py` (iTerm2 escape sequences)
- `tests/test_context.py` (13 context tests)
- `tests/test_iterm2.py` (10 iTerm2 tests)

**Result:** `aiterm context detect` shows project type, git branch, and suggested profile!

---

### Phase 4: Python Project Structure
- âœ… Created pyproject.toml with all dependencies
- âœ… Set up src/aiterm/ package structure (cli, terminal, context, claude, utils)
- âœ… Implemented basic CLI with Typer + Rich
- âœ… Working commands: --version, init, doctor, profile list, claude settings
- âœ… Added test suite (6 tests, all passing)
- âœ… Installed with `pip install -e ".[dev]"`

**Files Created:**
- `pyproject.toml` (project config + dependencies)
- `src/aiterm/` (main package)
- `src/aiterm/cli/main.py` (CLI entry point)
- `tests/test_cli.py` (6 CLI tests)

**Result:** `aiterm --version` works! CLI foundation ready.

---

### Phase 3: Slash Commands Optimization
- âœ… Created 6 core hub commands: /hub, /workflow, /git, /site, /code, /research
- âœ… Archived 5 deprecated commands: help, math, write, github, teach
- âœ… Enhanced /hub to absorb /help functionality
- âœ… Added command templates in `templates/commands/`
- âœ… Result: 40% reduction (10 â†’ 6 commands), clearer structure

**Files Created:**
- `templates/commands/hubs/*.md` (6 hub commands)
- `templates/commands/archive/*.md` (5 archived commands)
- `templates/commands/README.md` (documentation)

---

## âœ… Previously Completed (2025-12-15 - Claude Code Refactoring)

### Phase 1: Settings Cleanup (CRITICAL)
- âœ… Cleaned .claude/settings.local.json (95% reduction)
- âœ… Removed 86 one-time/temporary auto-approvals
- âœ… Kept 20 essential patterns only
- âœ… Result: 10,056 bytes â†’ 513 bytes

### Phase 2: Documentation Consolidation
- âœ… Consolidated 8 files â†’ 4 focused files
- âœ… Created START-HERE.md (3-min quick start)
- âœ… Created REFERENCE.md (merged 2 files)
- âœ… Created @SMART.md (merged 2 files)
- âœ… Archived 6 old documentation files
- âœ… Result: Clearer entry points, single source of truth

### Documentation Site Maintenance
- âœ… Fixed broken iTerm2 screenshot link (404 error)
- âœ… Ran comprehensive link checker (100% valid)
- âœ… Rebuilt and deployed to GitHub Pages
- âœ… Merged dev â†’ main and pushed

**Files Modified:**
- `.claude/settings.local.json` (cleaned)
- `~/.claude/START-HERE.md` (rewritten)
- `~/.claude/REFERENCE.md` (new)
- `~/.claude/@SMART.md` (new)
- `docs/guide/status-bar.md` (link fix)

**Result:** Faster startup, cleaner docs, deployed successfully!

## ðŸŽ¯ Next Action

**PR Ready for Review** ðŸŸ¢
- Branch: `claude/recap-dev-main-branches-3eCZB` â†’ `dev`
- After merge to dev: Final review & merge to main
- After main merge: Tag v0.1.0-dev release

# Week 1 MVP Goals
Day 1-2: Project setup, Python structure
Day 3-4: Core terminal integration, context detection
Day 5: Claude Code settings & auto-approvals
Day 6: Testing & documentation
Day 7: Polish & dogfooding

# Links
repo: https://github.com/Data-Wise/iterm2-context-switcher
docs: https://data-wise.github.io/iterm2-context-switcher/ (will update)
